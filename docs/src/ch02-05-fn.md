# Fn

## Overview

The `Fn` type is a wrapper around Solidity's internal function type. Internal functions in Solidity
are 16 bit integers pointing to either a bytecode index or a function id if the Yul intermediate
representation is active. The `Fn` type can handle up to eight unique arguments and partial
application of arguments can create new functions altogether. Arguments are applied one at a time,
left to right. If more arguments are applied than the underlying function can handle, the `Fn` will
exceptionally halt at runtime. Arguments can also be of type `Primitive` or `Fn`; if the latter,
those functions may also be partially applied. Arguments are lazily evaluated, resolved only when
required by the `call` method.

```solidity
function mul(Primitive a, Primitive b) pure returns (Primitive) {
    return a * b;
}

Fn double = mul.toFn().applyArgument(two);
Fn triple = mul.toFn().applyArgument(three);

Primitive result = double.applyArgument(
    triple.applyArgument(four)
).call();
```

Information about the `Fn` can be obtained using a few functions.

```solidity
Fn f = mul.asFn();

f.destination();
f.kindBitmap();
f.appliedArguments();
f.expectedArguments();
f.argumentAt(index);
f.isConcreteAt(index);
f.isCallable();
```

A `Fn` may also be cloned where a new memory slice is allocated for arguments and all arguments are
copied to the new memory slice.

```solidity
Fn multiply = mul.asFn();
Fn alsoMultiply = multiply.clone();
```

## Layout

### Stack

### Memory

## API

## Assumptions

## Undefined Behavior
